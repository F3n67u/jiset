{"kind":"Method","lang":true,"params":[],"steps":[{"tokens":["Let",{"id":"module"},"be","this","Source","Text","Module","Record","."]},{"tokens":["For","each","ExportEntry","Record",{"id":"e"},"in",{"id":"module"},".","[","[","IndirectExportEntries","]","]",",","do",{"steps":[{"tokens":["Let",{"id":"resolution"},"be","?",{"id":"module"},".","ResolveExport","(",{"id":"e"},".","[","[","ExportName","]","]",",","«","»",")","."]},{"tokens":["If",{"id":"resolution"},"is",{"value":"null"},"or",{"code":"\"ambiguous\""},",","throw","a",{"value":"SyntaxError"},"exception","."]},{"tokens":["Assert",":",{"id":"resolution"},"is","a","ResolvedBinding","Record","."]}]}]},{"tokens":["Assert",":","All","named","exports","from",{"id":"module"},"are","resolvable","."]},{"tokens":["Let",{"id":"realm"},"be",{"id":"module"},".","[","[","Realm","]","]","."]},{"tokens":["Assert",":",{"id":"realm"},"is","not",{"value":"undefined"},"."]},{"tokens":["Let",{"id":"env"},"be","NewModuleEnvironment","(",{"id":"realm"},".","[","[","GlobalEnv","]","]",")","."]},{"tokens":["Set",{"id":"module"},".","[","[","Environment","]","]","to",{"id":"env"},"."]},{"tokens":["Let",{"id":"envRec"},"be",{"id":"env"},"'","s","EnvironmentRecord","."]},{"tokens":["For","each","ImportEntry","Record",{"id":"in"},"in",{"id":"module"},".","[","[","ImportEntries","]","]",",","do",{"steps":[{"tokens":["Let",{"id":"importedModule"},"be","!","HostResolveImportedModule","(",{"id":"module"},",",{"id":"in"},".","[","[","ModuleRequest","]","]",")","."]},{"tokens":["NOTE",":","The","above","call","cannot","fail","because","imported","module","requests","are","a","subset","of",{"id":"module"},".","[","[","RequestedModules","]","]",",","and","these","have","been","resolved","earlier","in","this","algorithm","."]},{"tokens":["If",{"id":"in"},".","[","[","ImportName","]","]","is",{"code":"\"*\""},",","then",{"steps":[{"tokens":["Let",{"id":"namespace"},"be","?","GetModuleNamespace","(",{"id":"importedModule"},")","."]},{"tokens":["Perform","!",{"id":"envRec"},".","CreateImmutableBinding","(",{"id":"in"},".","[","[","LocalName","]","]",",",{"value":"true"},")","."]},{"tokens":["Call",{"id":"envRec"},".","InitializeBinding","(",{"id":"in"},".","[","[","LocalName","]","]",",",{"id":"namespace"},")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Let",{"id":"resolution"},"be","?",{"id":"importedModule"},".","ResolveExport","(",{"id":"in"},".","[","[","ImportName","]","]",",","«","»",")","."]},{"tokens":["If",{"id":"resolution"},"is",{"value":"null"},"or",{"code":"\"ambiguous\""},",","throw","a",{"value":"SyntaxError"},"exception","."]},{"tokens":["Call",{"id":"envRec"},".","CreateImportBinding","(",{"id":"in"},".","[","[","LocalName","]","]",",",{"id":"resolution"},".","[","[","Module","]","]",",",{"id":"resolution"},".","[","[","BindingName","]","]",")","."]}]}]}]}]},{"tokens":["Let",{"id":"code"},"be",{"id":"module"},".","[","[","ECMAScriptCode","]","]","."]},{"tokens":["Let",{"id":"varDeclarations"},"be","the","VarScopedDeclarations","of",{"id":"code"},"."]},{"tokens":["Let",{"id":"declaredVarNames"},"be","a","new","empty","List","."]},{"tokens":["For","each","element",{"id":"d"},"in",{"id":"varDeclarations"},",","do",{"steps":[{"tokens":["For","each","element",{"id":"dn"},"of","the","BoundNames","of",{"id":"d"},",","do",{"steps":[{"tokens":["If",{"id":"dn"},"is","not","an","element","of",{"id":"declaredVarNames"},",","then",{"steps":[{"tokens":["Perform","!",{"id":"envRec"},".","CreateMutableBinding","(",{"id":"dn"},",",{"value":"false"},")","."]},{"tokens":["Call",{"id":"envRec"},".","InitializeBinding","(",{"id":"dn"},",",{"value":"undefined"},")","."]},{"tokens":["Append",{"id":"dn"},"to",{"id":"declaredVarNames"},"."]}]}]}]}]}]}]},{"tokens":["Let",{"id":"lexDeclarations"},"be","the","LexicallyScopedDeclarations","of",{"id":"code"},"."]},{"tokens":["For","each","element",{"id":"d"},"in",{"id":"lexDeclarations"},",","do",{"steps":[{"tokens":["For","each","element",{"id":"dn"},"of","the","BoundNames","of",{"id":"d"},",","do",{"steps":[{"tokens":["If","IsConstantDeclaration","of",{"id":"d"},"is",{"value":"true"},",","then",{"steps":[{"tokens":["Perform","!",{"id":"envRec"},".","CreateImmutableBinding","(",{"id":"dn"},",",{"value":"true"},")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Perform","!",{"id":"envRec"},".","CreateMutableBinding","(",{"id":"dn"},",",{"value":"false"},")","."]}]}]},{"tokens":["If",{"id":"d"},"is","a",{"nt":"FunctionDeclaration"},",","a",{"nt":"GeneratorDeclaration"},",","an",{"nt":"AsyncFunctionDeclaration"},",","or","an",{"nt":"AsyncGeneratorDeclaration"},",","then",{"steps":[{"tokens":["Let",{"id":"fo"},"be","the","result","of","performing","InstantiateFunctionObject","for",{"id":"d"},"with","argument",{"id":"env"},"."]},{"tokens":["Call",{"id":"envRec"},".","InitializeBinding","(",{"id":"dn"},",",{"id":"fo"},")","."]}]}]}]}]}]}]},{"tokens":["Return","NormalCompletion","(",{"const":"empty"},")","."]}],"length":0,"filename":"es2000/algorithm/15.2.1.17.4InitializeEnvironment()ConcreteMethod0.json"}
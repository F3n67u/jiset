{"kind":"RuntimeSemantics","lang":false,"params":["iteratorRecord","constructor","resultCapability"],"steps":[{"tokens":["Assert",":","IsConstructor","(",{"id":"constructor"},")","is",{"value":"true"},"."]},{"tokens":["Assert",":",{"id":"resultCapability"},"is","a","PromiseCapability","Record","."]},{"tokens":["Let",{"id":"promiseResolve"},"be","?","Get","(",{"id":"constructor"},",",{"value":"\"resolve\""},")","."]},{"tokens":["If","!","IsCallable","(",{"id":"promiseResolve"},")","is",{"value":"false"},",","throw","a",{"value":"TypeError"},"exception","."]},{"tokens":["Repeat",",",{"steps":[{"tokens":["Let",{"id":"next"},"be","IteratorStep","(",{"id":"iteratorRecord"},")","."]},{"tokens":["If",{"id":"next"},"is","an","abrupt","completion",",","set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["ReturnIfAbrupt","(",{"id":"next"},")","."]},{"tokens":["If",{"id":"next"},"is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["Return",{"id":"resultCapability"},".","[","[","Promise","]","]","."]}]}]},{"tokens":["Let",{"id":"nextValue"},"be","IteratorValue","(",{"id":"next"},")","."]},{"tokens":["If",{"id":"nextValue"},"is","an","abrupt","completion",",","set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["ReturnIfAbrupt","(",{"id":"nextValue"},")","."]},{"tokens":["Let",{"id":"nextPromise"},"be","?","Call","(",{"id":"promiseResolve"},",",{"id":"constructor"},",","«",{"id":"nextValue"},"»",")","."]},{"tokens":["Perform","?","Invoke","(",{"id":"nextPromise"},",",{"value":"\"then\""},",","«",{"id":"resultCapability"},".","[","[","Resolve","]","]",",",{"id":"resultCapability"},".","[","[","Reject","]","]","»",")","."]}]}]}],"length":3,"filename":"es2020/algorithm/PerformPromiseRace.json"}
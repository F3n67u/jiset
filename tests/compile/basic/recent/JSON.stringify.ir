{
  let stack = (new [])
  let indent = ""
  let PropertyList = undefined
  let ReplacerFunction = undefined
  app __x0__ = (Type replacer)
  if (= __x0__ Object) {
    app __x1__ = (IsCallable replacer)
    if (= __x1__ true) ReplacerFunction = replacer else {
      app __x2__ = (IsArray replacer)
      let isArray = [? __x2__]
      if (= isArray true) {
        PropertyList = (new [])
        app __x3__ = (LengthOfArrayLike replacer)
        let len = [? __x3__]
        let k = 0i
        while (< k len) {
          app __x4__ = (ToString k)
          let prop = [! __x4__]
          app __x5__ = (Get replacer prop)
          let v = [? __x5__]
          let item = undefined
          app __x6__ = (Type v)
          if (= __x6__ String) item = v else {
            app __x7__ = (Type v)
            if (= __x7__ Number) {
              app __x8__ = (ToString v)
              item = [! __x8__]
            } else {
              app __x9__ = (Type v)
              if (= __x9__ Object) ??? "If id:{v} has a [ [ StringData ] ] or [ [ NumberData ] ] internal slot , set id:{item} to ? ToString ( id:{v} ) ." else {}
            }
          }
          ??? "If id:{item} is not value:{undefined} and id:{item} is not currently an element of id:{PropertyList} , then in:{} out:{}"
          k = (+ k 1i)
        }
      } else {}
    }
  } else {}
  app __x10__ = (Type space)
  if (= __x10__ Object) if (! (= space.NumberData absent)) {
    app __x11__ = (ToNumber space)
    space = [? __x11__]
  } else if (! (= space.StringData absent)) {
    app __x12__ = (ToString space)
    space = [? __x12__]
  } else {} else {}
  app __x13__ = (Type space)
  if (= __x13__ Number) {
    app __x14__ = (ToIntegerOrInfinity space)
    let spaceMV = [! __x14__]
    app __x15__ = (min 10i spaceMV)
    spaceMV = __x15__
    ??? "If id:{spaceMV} < 1 , let id:{gap} be the empty String ; otherwise let id:{gap} be the String value containing id:{spaceMV} occurrences of the code unit 0x0020 ( SPACE ) ."
  } else {
    app __x16__ = (Type space)
    if (= __x16__ String) ??? "If the length of id:{space} is 10 or less , let id:{gap} be id:{space} ; otherwise let id:{gap} be the substring of id:{space} from 0 to 10 ." else let gap = ""
  }
  app __x17__ = (OrdinaryObjectCreate INTRINSIC_Object_prototype)
  let wrapper = [! __x17__]
  app __x18__ = (CreateDataPropertyOrThrow wrapper "" value)
  [! __x18__]
  let state = (new Record("ReplacerFunction" -> ReplacerFunction, "Stack" -> stack, "Indent" -> indent, "Gap" -> gap, "PropertyList" -> PropertyList))
  app __x19__ = (SerializeJSONProperty state "" wrapper)
  return [? __x19__]
}
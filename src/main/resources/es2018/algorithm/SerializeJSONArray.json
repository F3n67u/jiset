{"kind":"RuntimeSemantics","params":["value"],"steps":[{"tokens":["If",{"id":"stack"},"contains",{"id":"value"},",","throw","a",{"value":"TypeError"},"exception","because","the","structure","is","cyclical","."]},{"tokens":["Append",{"id":"value"},"to",{"id":"stack"},"."]},{"tokens":["Let",{"id":"stepback"},"be",{"id":"indent"},"."]},{"tokens":["Set",{"id":"indent"},"to","the","string","-","concatenation","of",{"id":"indent"},"and",{"id":"gap"},"."]},{"tokens":["Let",{"id":"partial"},"be","a","new","empty","List","."]},{"tokens":["Let",{"id":"len"},"be","?","ToLength","(","?","Get","(",{"id":"value"},",",{"value":"\"length\""},")",")","."]},{"tokens":["Let",{"id":"index"},"be","0","."]},{"tokens":["Repeat",",","while",{"id":"index"},"<",{"id":"len"},{"steps":[{"tokens":["Let",{"id":"strP"},"be","?","SerializeJSONProperty","(","!","ToString","(",{"id":"index"},")",",",{"id":"value"},")","."]},{"tokens":["If",{"id":"strP"},"is",{"value":"undefined"},",","then",{"steps":[{"tokens":["Append",{"value":"\"null\""},"to",{"id":"partial"},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Append",{"id":"strP"},"to",{"id":"partial"},"."]}]}]},{"tokens":["Increment",{"id":"index"},"by","1","."]}]}]},{"tokens":["If",{"id":"partial"},"is","empty",",","then",{"steps":[{"tokens":["Let",{"id":"final"},"be",{"value":"\"[]\""},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["If",{"id":"gap"},"is","the","empty","String",",","then",{"steps":[{"tokens":["Let",{"id":"properties"},"be","the","String","value","formed","by","concatenating","all","the","element","Strings","of",{"id":"partial"},"with","each","adjacent","pair","of","Strings","separated","with","the","code","unit","0x002C","(","COMMA",")",".","A","comma","is","not","inserted","either","before","the","first","String","or","after","the","last","String","."]},{"tokens":["Let",{"id":"final"},"be","the","string","-","concatenation","of",{"value":"\"[\""},",",{"id":"properties"},",","and",{"value":"\"]\""},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Let",{"id":"separator"},"be","the","string","-","concatenation","of","the","code","unit","0x002C","(","COMMA",")",",","the","code","unit","0x000A","(","LINE","FEED",")",",","and",{"id":"indent"},"."]},{"tokens":["Let",{"id":"properties"},"be","the","String","value","formed","by","concatenating","all","the","element","Strings","of",{"id":"partial"},"with","each","adjacent","pair","of","Strings","separated","with",{"id":"separator"},".","The",{"id":"separator"},"String","is","not","inserted","either","before","the","first","String","or","after","the","last","String","."]},{"tokens":["Let",{"id":"final"},"be","the","string","-","concatenation","of",{"value":"\"[\""},",","the","code","unit","0x000A","(","LINE","FEED",")",",",{"id":"indent"},",",{"id":"properties"},",","the","code","unit","0x000A","(","LINE","FEED",")",",",{"id":"stepback"},",","and",{"value":"\"]\""},"."]}]}]}]}]},{"tokens":["Remove","the","last","element","of",{"id":"stack"},"."]},{"tokens":["Set",{"id":"indent"},"to",{"id":"stepback"},"."]},{"tokens":["Return",{"id":"final"},"."]}],"filename":"es2018/algorithm/SerializeJSONArray.json"}
{
  let rx = this
  app __x0__ = (Type rx)
  if (! (= __x0__ Object)) throw TypeError else {}
  app __x1__ = (ToString string)
  let S = [? __x1__]
  app __x2__ = (SpeciesConstructor rx INTRINSIC_RegExp)
  let C = [? __x2__]
  app __x3__ = (Get rx "flags")
  app __x4__ = (ToString [? __x3__])
  let flags = [? __x4__]
  if (contains flags "u") let unicodeMatching = true else let unicodeMatching = false
  if (contains flags "y") let newFlags = flags else let newFlags = (+ flags "y")
  app __x5__ = (Construct C (new [rx, newFlags]))
  let splitter = [? __x5__]
  app __x6__ = (ArrayCreate 0i)
  let A = [! __x6__]
  let lengthA = 0i
  if (= limit undefined) let lim = (- (** 2.0 32i) 1i) else {
    app __x7__ = (ToUint32 limit)
    let lim = [? __x7__]
  }
  if (= lim 0i) return A else {}
  let size = S.length
  if (= size 0i) {
    app __x8__ = (RegExpExec splitter S)
    let z = [? __x8__]
    if (! (= z null)) return A else {}
    app __x9__ = (CreateDataPropertyOrThrow A "0" S)
    [! __x9__]
    return A
  } else {}
  let p = 0i
  let q = p
  while (< q size) {
    app __x10__ = (Set splitter "lastIndex" q true)
    [? __x10__]
    app __x11__ = (RegExpExec splitter S)
    let z = [? __x11__]
    if (= z null) {
      app __x12__ = (AdvanceStringIndex S q unicodeMatching)
      q = __x12__
    } else {
      app __x13__ = (Get splitter "lastIndex")
      app __x14__ = (ToLength [? __x13__])
      let e = [? __x14__]
      app __x15__ = (min e size)
      e = __x15__
      if (== e p) {
        app __x16__ = (AdvanceStringIndex S q unicodeMatching)
        q = __x16__
      } else {
        let __x17__ = ""
        let __x18__ = p
        while (< __x18__ (+ q 1i)) {
          access __x19__ = (S __x18__)
          __x17__ = (+ __x17__ __x19__)
          __x18__ = (+ __x18__ 1i)
        }
        let T = __x17__
        app __x20__ = (ToString lengthA)
        app __x21__ = (CreateDataPropertyOrThrow A [! __x20__] T)
        [! __x21__]
        lengthA = (+ lengthA 1i)
        if (== lengthA lim) return A else {}
        p = e
        app __x22__ = (LengthOfArrayLike z)
        let numberOfCaptures = [? __x22__]
        app __x23__ = (max (- numberOfCaptures 1i) 0i)
        numberOfCaptures = __x23__
        let i = 1i
        while (! (< numberOfCaptures i)) {
          app __x24__ = (ToString i)
          app __x25__ = (Get z [! __x24__])
          let nextCapture = [? __x25__]
          app __x26__ = (ToString lengthA)
          app __x27__ = (CreateDataPropertyOrThrow A [! __x26__] nextCapture)
          [! __x27__]
          i = (+ i 1i)
          lengthA = (+ lengthA 1i)
          if (== lengthA lim) return A else {}
        }
        q = p
      }
    }
  }
  let __x28__ = ""
  let __x29__ = p
  while (< __x29__ (+ size 1i)) {
    access __x30__ = (S __x29__)
    __x28__ = (+ __x28__ __x30__)
    __x29__ = (+ __x29__ 1i)
  }
  let T = __x28__
  app __x31__ = (ToString lengthA)
  app __x32__ = (CreateDataPropertyOrThrow A [! __x31__] T)
  [! __x32__]
  return A
}
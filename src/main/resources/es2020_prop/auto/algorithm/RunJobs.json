{"kind":"Method","params":[],"steps":[{"tokens":["Perform","?","InitializeHostDefinedRealm","(",")","."]},{"tokens":["In","an","implementation","-","dependent","manner",",","obtain","the","ECMAScript","source","texts","(","see","clause","10",")","and","any","associated","host","-","defined","values","for","zero","or","more","ECMAScript","scripts","and","/","or","ECMAScript","modules",".","For","each","such",{"id":"sourceText"},"and",{"id":"hostDefined"},",","do",{"steps":[{"tokens":["If",{"id":"sourceText"},"is","the","source","code","of","a","script",",","then",{"steps":[{"tokens":["Perform","EnqueueJob","(",{"code":"\"ScriptJobs\""},",","ScriptEvaluationJob",",","«",{"id":"sourceText"},",",{"id":"hostDefined"},"»",")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Assert",":",{"id":"sourceText"},"is","the","source","code","of","a","module","."]},{"tokens":["Perform","EnqueueJob","(",{"code":"\"ScriptJobs\""},",","TopLevelModuleEvaluationJob",",","«",{"id":"sourceText"},",",{"id":"hostDefined"},"»",")","."]}]}]}]}]},{"tokens":["Repeat",",",{"steps":[{"tokens":["Suspend","the","running","execution","context","and","remove","it","from","the","execution","context","stack","."]},{"tokens":["Assert",":","The","execution","context","stack","is","now","empty","."]},{"tokens":["Let",{"id":"nextQueue"},"be","a","non","-","empty","Job","Queue","chosen","in","an","implementation","-","defined","manner",".","If","all","Job","Queues","are","empty",",","the","result","is","implementation","-","defined","."]},{"tokens":["Let",{"id":"nextPending"},"be","the","PendingJob","record","at","the","front","of",{"id":"nextQueue"},".","Remove","that","record","from",{"id":"nextQueue"},"."]},{"tokens":["Let",{"id":"newContext"},"be","a","new","execution","context","."]},{"tokens":["Set",{"id":"newContext"},"'","s","Function","to",{"value":"null"},"."]},{"tokens":["Set",{"id":"newContext"},"'","s","Realm","to",{"id":"nextPending"},".","[","[","Realm","]","]","."]},{"tokens":["Set",{"id":"newContext"},"'","s","ScriptOrModule","to",{"id":"nextPending"},".","[","[","ScriptOrModule","]","]","."]},{"tokens":["Push",{"id":"newContext"},"onto","the","execution","context","stack",";",{"id":"newContext"},"is","now","the","running","execution","context","."]},{"tokens":["Perform","any","implementation","or","host","environment","defined","job","initialization","using",{"id":"nextPending"},"."]},{"tokens":["Let",{"id":"result"},"be","the","result","of","performing","the","abstract","operation","named","by",{"id":"nextPending"},".","[","[","Job","]","]","using","the","elements","of",{"id":"nextPending"},".","[","[","Arguments","]","]","as","its","arguments","."]},{"tokens":["If",{"id":"result"},"is","an","abrupt","completion",",","perform","HostReportErrors","(","«",{"id":"result"},".","[","[","Value","]","]","»",")","."]}]}]}],"length":0,"filename":"es2020_prop/algorithm/RunJobs.json"}
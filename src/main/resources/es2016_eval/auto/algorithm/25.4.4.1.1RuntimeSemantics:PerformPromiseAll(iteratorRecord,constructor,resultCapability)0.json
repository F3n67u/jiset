{"kind":"Method","lang":false,"params":[],"steps":[{"tokens":["Assert",":",{"id":"constructor"},"is","a","constructor","function","."]},{"tokens":["Assert",":",{"id":"resultCapability"},"is","a","PromiseCapability","record","."]},{"tokens":["Let",{"id":"values"},"be","a","new","empty","List","."]},{"tokens":["Let",{"id":"remainingElementsCount"},"be","a","new","Record","{","[","[","Value","]","]",":","1","}","."]},{"tokens":["Let",{"id":"index"},"be","0","."]},{"tokens":["Repeat",{"steps":[{"tokens":["Let",{"id":"next"},"be","IteratorStep","(",{"id":"iteratorRecord"},".","[","[","Iterator","]","]",")","."]},{"tokens":["If",{"id":"next"},"is","an","abrupt","completion",",","set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["ReturnIfAbrupt","(",{"id":"next"},")","."]},{"tokens":["If",{"id":"next"},"is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["Set",{"id":"remainingElementsCount"},".","[","[","Value","]","]","to",{"id":"remainingElementsCount"},".","[","[","Value","]","]","-","1","."]},{"tokens":["If",{"id":"remainingElementsCount"},".","[","[","Value","]","]","is","0",",","then",{"steps":[{"tokens":["Let",{"id":"valuesArray"},"be","CreateArrayFromList","(",{"id":"values"},")","."]},{"tokens":["Perform","?","Call","(",{"id":"resultCapability"},".","[","[","Resolve","]","]",",",{"value":"undefined"},",","«",{"id":"valuesArray"},"»",")","."]}]}]},{"tokens":["Return",{"id":"resultCapability"},".","[","[","Promise","]","]","."]}]}]},{"tokens":["Let",{"id":"nextValue"},"be","IteratorValue","(",{"id":"next"},")","."]},{"tokens":["If",{"id":"nextValue"},"is","an","abrupt","completion",",","set",{"id":"iteratorRecord"},".","[","[","Done","]","]","to",{"value":"true"},"."]},{"tokens":["ReturnIfAbrupt","(",{"id":"nextValue"},")","."]},{"tokens":["Append",{"value":"undefined"},"to",{"id":"values"},"."]},{"tokens":["Let",{"id":"nextPromise"},"be","?","Invoke","(",{"id":"constructor"},",",{"code":"\"resolve\""},",","«",{"id":"nextValue"},"»",")","."]},{"tokens":["Let",{"id":"resolveElement"},"be","a","new","built","-","in","function","object","as","defined","in","Promise",".","all","Resolve","Element","Functions","."]},{"tokens":["Set","the","[","[","AlreadyCalled","]","]","internal","slot","of",{"id":"resolveElement"},"to","a","new","Record","{","[","[","Value","]","]",":",{"value":"false"},"}","."]},{"tokens":["Set","the","[","[","Index","]","]","internal","slot","of",{"id":"resolveElement"},"to",{"id":"index"},"."]},{"tokens":["Set","the","[","[","Values","]","]","internal","slot","of",{"id":"resolveElement"},"to",{"id":"values"},"."]},{"tokens":["Set","the","[","[","Capabilities","]","]","internal","slot","of",{"id":"resolveElement"},"to",{"id":"resultCapability"},"."]},{"tokens":["Set","the","[","[","RemainingElements","]","]","internal","slot","of",{"id":"resolveElement"},"to",{"id":"remainingElementsCount"},"."]},{"tokens":["Set",{"id":"remainingElementsCount"},".","[","[","Value","]","]","to",{"id":"remainingElementsCount"},".","[","[","Value","]","]","+","1","."]},{"tokens":["Perform","?","Invoke","(",{"id":"nextPromise"},",",{"code":"\"then\""},",","«",{"id":"resolveElement"},",",{"id":"resultCapability"},".","[","[","Reject","]","]","»",")","."]},{"tokens":["Set",{"id":"index"},"to",{"id":"index"},"+","1","."]}]}]}],"length":0,"filename":"es2000/algorithm/25.4.4.1.1RuntimeSemantics:PerformPromiseAll(iteratorRecord,constructor,resultCapability)0.json"}
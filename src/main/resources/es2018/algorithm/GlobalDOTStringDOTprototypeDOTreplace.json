{"kind":"Method","params":["searchValue","replaceValue"],"steps":[{"tokens":["Let",{"id":"O"},"be","?","RequireObjectCoercible","(",{"value":"this"},"value",")","."]},{"tokens":["If",{"id":"searchValue"},"is","neither",{"value":"undefined"},"nor",{"value":"null"},",","then",{"steps":[{"tokens":["Let",{"id":"replacer"},"be","?","GetMethod","(",{"id":"searchValue"},",","@","@","replace",")","."]},{"tokens":["If",{"id":"replacer"},"is","not",{"value":"undefined"},",","then",{"steps":[{"tokens":["Return","?","Call","(",{"id":"replacer"},",",{"id":"searchValue"},",","«",{"id":"O"},",",{"id":"replaceValue"},"»",")","."]}]}]}]}]},{"tokens":["Let",{"id":"string"},"be","?","ToString","(",{"id":"O"},")","."]},{"tokens":["Let",{"id":"searchString"},"be","?","ToString","(",{"id":"searchValue"},")","."]},{"tokens":["Let",{"id":"functionalReplace"},"be","IsCallable","(",{"id":"replaceValue"},")","."]},{"tokens":["If",{"id":"functionalReplace"},"is",{"value":"false"},",","then",{"steps":[{"tokens":["Let",{"id":"replaceValue"},"be","?","ToString","(",{"id":"replaceValue"},")","."]}]}]},{"tokens":["Search",{"id":"string"},"for","the","first","occurrence","of",{"id":"searchString"},"and","let",{"id":"pos"},"be","the","index","within",{"id":"string"},"of","the","first","code","unit","of","the","matched","substring","and","let",{"id":"matched"},"be",{"id":"searchString"},".","If","no","occurrences","of",{"id":"searchString"},"were","found",",","return",{"id":"string"},"."]},{"tokens":["If",{"id":"functionalReplace"},"is",{"value":"true"},",","then",{"steps":[{"tokens":["Let",{"id":"replValue"},"be","?","Call","(",{"id":"replaceValue"},",",{"value":"undefined"},",","«",{"id":"matched"},",",{"id":"pos"},",",{"id":"string"},"»",")","."]},{"tokens":["Let",{"id":"replStr"},"be","?","ToString","(",{"id":"replValue"},")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Let",{"id":"captures"},"be","a","new","empty","List","."]},{"tokens":["Let",{"id":"replStr"},"be","GetSubstitution","(",{"id":"matched"},",",{"id":"string"},",",{"id":"pos"},",",{"id":"captures"},",",{"value":"undefined"},",",{"id":"replaceValue"},")","."]}]}]},{"tokens":["Let",{"id":"tailPos"},"be",{"id":"pos"},"+","the","number","of","code","units","in",{"id":"matched"},"."]},{"tokens":["Let",{"id":"newString"},"be","the","string","-","concatenation","of","the","first",{"id":"pos"},"code","units","of",{"id":"string"},",",{"id":"replStr"},",","and","the","trailing","substring","of",{"id":"string"},"starting","at","index",{"id":"tailPos"},".","If",{"id":"pos"},"is","0",",","the","first","element","of","the","concatenation","will","be","the","empty","String","."]},{"tokens":["Return",{"id":"newString"},"."]}],"filename":"es2018/algorithm/GlobalDOTStringDOTprototypeDOTreplace.json"}
{
  let rx = this
  app __x0__ = (Type rx)
  if (! (= __x0__ Object)) {
    app __x1__ = (ThrowCompletion (new OrdinaryObject("Prototype" -> INTRINSIC_TypeError.prototype, "ErrorData" -> undefined, "SubMap" -> (new SubMap()))))
    return __x1__
  } else {}
  app __x2__ = (ToString string)
  if (is-completion __x2__) if (= __x2__.Type CONST_normal) __x2__ = __x2__.Value else return __x2__ else {}
  let S = __x2__
  app __x3__ = (SpeciesConstructor rx INTRINSIC_RegExp)
  if (is-completion __x3__) if (= __x3__.Type CONST_normal) __x3__ = __x3__.Value else return __x3__ else {}
  let C = __x3__
  app __x4__ = (Get rx "flags")
  if (is-completion __x4__) if (= __x4__.Type CONST_normal) __x4__ = __x4__.Value else return __x4__ else {}
  app __x5__ = (ToString __x4__)
  if (is-completion __x5__) if (= __x5__.Type CONST_normal) __x5__ = __x5__.Value else return __x5__ else {}
  let flags = __x5__
  if (contains flags "u") let unicodeMatching = true else let unicodeMatching = false
  if (contains flags "y") let newFlags = flags else let newFlags = (+ flags "y")
  app __x6__ = (Construct C (new [rx, newFlags]))
  if (is-completion __x6__) if (= __x6__.Type CONST_normal) __x6__ = __x6__.Value else return __x6__ else {}
  let splitter = __x6__
  app __x7__ = (ArrayCreate 0i)
  if (is-completion __x7__) if (= __x7__.Type CONST_normal) __x7__ = __x7__.Value else return __x7__ else {}
  let A = __x7__
  let lengthA = 0i
  if (= limit undefined) let lim = (- (** 2.0 32i) 1i) else {
    app __x8__ = (ToUint32 limit)
    if (is-completion __x8__) if (= __x8__.Type CONST_normal) __x8__ = __x8__.Value else return __x8__ else {}
    let lim = __x8__
  }
  if (= lim 0i) {
    app __x9__ = (WrapCompletion A)
    return __x9__
  } else {}
  let size = S.length
  if (= size 0i) {
    app __x10__ = (RegExpExec splitter S)
    if (is-completion __x10__) if (= __x10__.Type CONST_normal) __x10__ = __x10__.Value else return __x10__ else {}
    let z = __x10__
    if (! (= z null)) {
      app __x11__ = (WrapCompletion A)
      return __x11__
    } else {}
    app __x12__ = (CreateDataPropertyOrThrow A "0" S)
    if (is-completion __x12__) if (= __x12__.Type CONST_normal) __x12__ = __x12__.Value else return __x12__ else {}
    __x12__
    app __x13__ = (WrapCompletion A)
    return __x13__
  } else {}
  let p = 0i
  let q = p
  while (< q size) {
    app __x14__ = (Set splitter "lastIndex" q true)
    if (is-completion __x14__) if (= __x14__.Type CONST_normal) __x14__ = __x14__.Value else return __x14__ else {}
    __x14__
    app __x15__ = (RegExpExec splitter S)
    if (is-completion __x15__) if (= __x15__.Type CONST_normal) __x15__ = __x15__.Value else return __x15__ else {}
    let z = __x15__
    if (= z null) {
      app __x16__ = (AdvanceStringIndex S q unicodeMatching)
      q = __x16__
    } else {
      app __x17__ = (Get splitter "lastIndex")
      if (is-completion __x17__) if (= __x17__.Type CONST_normal) __x17__ = __x17__.Value else return __x17__ else {}
      app __x18__ = (ToLength __x17__)
      if (is-completion __x18__) if (= __x18__.Type CONST_normal) __x18__ = __x18__.Value else return __x18__ else {}
      let e = __x18__
      app __x19__ = (min e size)
      e = __x19__
      if (== e p) {
        app __x20__ = (AdvanceStringIndex S q unicodeMatching)
        q = __x20__
      } else {
        let __x21__ = ""
        let __x22__ = p
        while (< __x22__ (+ q 1i)) {
          access __x23__ = (S __x22__)
          __x21__ = (+ __x21__ __x23__)
          __x22__ = (+ __x22__ 1i)
        }
        let T = __x21__
        app __x24__ = (ToString lengthA)
        if (is-completion __x24__) if (= __x24__.Type CONST_normal) __x24__ = __x24__.Value else return __x24__ else {}
        app __x25__ = (CreateDataPropertyOrThrow A __x24__ T)
        if (is-completion __x25__) if (= __x25__.Type CONST_normal) __x25__ = __x25__.Value else return __x25__ else {}
        __x25__
        lengthA = (+ lengthA 1i)
        if (== lengthA lim) {
          app __x26__ = (WrapCompletion A)
          return __x26__
        } else {}
        p = e
        app __x27__ = (LengthOfArrayLike z)
        if (is-completion __x27__) if (= __x27__.Type CONST_normal) __x27__ = __x27__.Value else return __x27__ else {}
        let numberOfCaptures = __x27__
        app __x28__ = (max (- numberOfCaptures 1i) 0i)
        numberOfCaptures = __x28__
        let i = 1i
        while (! (< numberOfCaptures i)) {
          app __x29__ = (ToString i)
          if (is-completion __x29__) if (= __x29__.Type CONST_normal) __x29__ = __x29__.Value else return __x29__ else {}
          app __x30__ = (Get z __x29__)
          if (is-completion __x30__) if (= __x30__.Type CONST_normal) __x30__ = __x30__.Value else return __x30__ else {}
          let nextCapture = __x30__
          app __x31__ = (ToString lengthA)
          if (is-completion __x31__) if (= __x31__.Type CONST_normal) __x31__ = __x31__.Value else return __x31__ else {}
          app __x32__ = (CreateDataPropertyOrThrow A __x31__ nextCapture)
          if (is-completion __x32__) if (= __x32__.Type CONST_normal) __x32__ = __x32__.Value else return __x32__ else {}
          __x32__
          i = (+ i 1i)
          lengthA = (+ lengthA 1i)
          if (== lengthA lim) {
            app __x33__ = (WrapCompletion A)
            return __x33__
          } else {}
        }
        q = p
      }
    }
  }
  let __x34__ = ""
  let __x35__ = p
  while (< __x35__ (+ size 1i)) {
    access __x36__ = (S __x35__)
    __x34__ = (+ __x34__ __x36__)
    __x35__ = (+ __x35__ 1i)
  }
  let T = __x34__
  app __x37__ = (ToString lengthA)
  if (is-completion __x37__) if (= __x37__.Type CONST_normal) __x37__ = __x37__.Value else return __x37__ else {}
  app __x38__ = (CreateDataPropertyOrThrow A __x37__ T)
  if (is-completion __x38__) if (= __x38__.Type CONST_normal) __x38__ = __x38__.Value else return __x38__ else {}
  __x38__
  app __x39__ = (WrapCompletion A)
  return __x39__
}
% packages
\usepackage{cite}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{subcaption}
\usepackage{multirow}
\usepackage[numbers]{natbib}
\usepackage{url}
\usepackage{stmaryrd}
\usepackage{colortbl}
\usepackage{ctable}
\usepackage{makecell}
\usepackage{graphics}
\usepackage{float}

% thicker vertical line
\newcolumntype{?}{!{\vrule width 1pt}}

% math zaph chancery characters
\DeclareMathAlphabet{\mathpzc}{T1}{pzc}{m}{it}

% powerset
\newcommand{\partsof}[1]{\mathcal{P}(#1)}

% code styles
\definecolor{dkgreen}{rgb}{0,0.6,0}
\lstdefinelanguage{JavaScript}{
  keywords={let, async, await, break, case, catch, class, const, continue,
    debugger, default, delete, do, else, enum, export, extends, false, finally,
    for, function, if, import, in, instanceof, new, null, return, super, switch,
    this, throw, true, try, typeof, var, void, while, with, yield},
  keywordstyle=\color{blue}\bfseries,
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{dkgreen}\ttfamily,
  stringstyle=\color{purple}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}
\lstdefinestyle{FigureJS}{
  language=JavaScript,
  numbers=left,
  stepnumber=1,
  extendedchars=true,
  basicstyle=\small\ttfamily,
  showstringspaces=false,
  showspaces=false,
  xleftmargin=\parindent,
  tabsize=2,
  breaklines=true,
  showtabs=false,
  captionpos=b
}
\lstdefinestyle{code}{
  numbers=none,
  extendedchars=true,
  basicstyle=\small\ttfamily,
  showstringspaces=false,
  showspaces=false,
  xleftmargin=\parindent,
  tabsize=2,
  breaklines=true,
  showtabs=false,
  captionpos=b
}

% tool name
\newcommand{\stextsf}[1]{\textsf{\small #1}}
\newcommand{\bigtool}{\textsf{JSTAR}}
\newcommand{\tool}{\stextsf{JSTAR}}
\newcommand{\jiset}{\stextsf{JISET}}
\newcommand{\jest}{\stextsf{JEST}}

% ires
\newcommand{\ires}{{\text{IR}_\text{ES}}}

% comments with red color
\newcommand{\inred}[1]{{\color{red}{#1}}}
\newcommand{\todo}{\text{\inred{TODO}}}

% codes
\newcommand{\jscode}[1]{\text{\lstinline[style=FigureJS,numbers=none]!#1!}}
\newcommand{\code}[1]{\text{\lstinline[style=code]!#1!}}
\newcommand{\clist}[1]{\kwsl #1 \kwsr}

% finite mapping
\newcommand{\finmap}{\xrightarrow{\text{fin}}}
\newcommand{\domain}[1]{\text{Domain}(#1)}

% empty
\newcommand{\emp}{\varnothing}

% size
\newcommand{\size}[1]{\lVert{#1}\rVert}

% abstraction
\newcommand{\abs}[1]{{#1}^\sharp}

% initial
\newcommand{\init}[1]{{#1}_\iota}

% states
\newcommand{\dom}{\mathbb{S}}
\newcommand{\ielemset}{\init{\dom}}
\newcommand{\elem}{d}
\newcommand{\ctxtset}{\mathbb{C}}
\newcommand{\ctxt}{C}
\newcommand{\envset}{\mathbb{E}}
\newcommand{\env}{\sigma}
\newcommand{\valset}{\mathbb{V}}
\newcommand{\val}{v}

% abstract states
\newcommand{\adom}{\abs{\dom}}
\newcommand{\aelem}{\abs{\elem}}
\newcommand{\iaelem}{{\elem_\iota^\sharp}}
\newcommand{\aenvset}{\abs{\envset}}
\newcommand{\aenv}{\abs{\env}}
\newcommand{\atyset}{\tyset^\sharp}
\newcommand{\aty}{\ty^\sharp}
\newcommand{\join}{\sqcup}
\newcommand{\bigjoin}{\bigsqcup}
\newcommand{\meet}{\sqcap}
\newcommand{\bigmeet}{\bigsqcap}
\newcommand{\order}{\sqsubseteq}
\newcommand{\norder}{\not\sqsubseteq}

% abstract interpretation
\newcommand{\atransfer}{\abs{F}}
\newcommand{\detector}{\atransfer_a}

% result maps
\newcommand{\rmapset}{\mathbb{M}}
\newcommand{\rmap}{m}

% return points
\newcommand{\retpset}{\mathbb{R}}
\newcommand{\retp}{r}

% subtype
\newcommand{\subtype}{<:}

% programs
\newcommand{\prog}{P}
\newcommand{\getfunc}{\code{func}}
\newcommand{\getinst}{\code{inst}}
\newcommand{\getnext}{\code{next}}

% syntax
\newcommand{\funcset}{\mathbb{F}}
\newcommand{\func}{f}
\newcommand{\instset}{\mathbb{I}}
\newcommand{\inst}{i}
\newcommand{\expr}{e}
\newcommand{\refer}{r}
\newcommand{\const}{c}
\newcommand{\primset}{\mathbb{P}}
\newcommand{\prim}{p}
\newcommand{\undefval}{\code{undefined}}
\newcommand{\nullval}{\code{null}}
\newcommand{\bool}{b}
\newcommand{\true}{\code{\#t}}
\newcommand{\false}{\code{\#f}}
\newcommand{\num}{n}
\newcommand{\bigint}{j}
\newcommand{\str}{s}
\newcommand{\symb}{\code{@}s}

% keywords
\newcommand{\kwlet}{\code{let}}
\newcommand{\kwif}{\code{if}}
\newcommand{\kwdef}{\code{def}}
\newcommand{\kwwhile}{\code{while}}
\newcommand{\kwreturn}{\code{return}}
\newcommand{\kwassert}{\code{assert}}
\newcommand{\kwrl}{\code{(}}
\newcommand{\kwrr}{\code{)}}
\newcommand{\kwcl}{\code{\{}}
\newcommand{\kwcr}{\code{\}}}
\newcommand{\kwsl}{\code{[}}
\newcommand{\kwsr}{\code{]}}
\newcommand{\kwexists}{\code{?}}

% constants
\newcommand{\nconst}[1]{\const_{\code{#1}}}

% types
\newcommand{\tyset}{\mathbb{T}}
\newcommand{\ty}{\tau}
\newcommand{\tys}{\overline{\ty}}
\newcommand{\tname}{t}
\newcommand{\tjs}{\code{js}}
\newcommand{\tprim}{\code{prim}}
\newcommand{\tbool}{\code{bool}}
\newcommand{\tnumeric}{\code{numeric}}
\newcommand{\tnum}{\code{num}}
\newcommand{\tbigint}{\code{bigint}}
\newcommand{\tstr}{\code{str}}
\newcommand{\tsymb}{\code{symbol}}
\newcommand{\tnormal}{\code{normal}}
\newcommand{\tabrupt}{\code{abrupt}}
\newcommand{\tabsent}{\code{?}}
\newcommand{\upcast}{\code{up}}
\newcommand{\upcasts}{\dot{\upcast}}
\newcommand{\norm}{\code{norm}}
\newcommand{\getSingle}[1]{\lfloor #1 \rfloor}

% fields
\newcommand{\fields}{\code{fs}}

% refinement
\newcommand{\refine}{\code{refine}}
\newcommand{\pass}{\code{pass}}

% operators
\newcommand{\bop}{\oplus}
\newcommand{\uop}{\ominus}
\newcommand{\escaped}{\downarrow}

% variables
\newcommand{\varset}{\mathbb{X}}
\newcommand{\mt}{\code{t}}
\newcommand{\mf}{\code{f}}
\newcommand{\f}{\code{f}}
\newcommand{\p}{\code{p}}
\newcommand{\this}{\code{this}}
\newcommand{\args}{\code{args}}
\newcommand{\NewTarget}{\code{NewTarget}}
\newcommand{\Type}{\code{Type}}
\newcommand{\Value}{\code{Value}}
\newcommand{\Target}{\code{Target}}
\newcommand{\n}{\code{n}}
\newcommand{\x}{\code{x}}
\newcommand{\y}{\code{y}}
\newcommand{\z}{\code{z}}

% labels
\newcommand{\labset}{\mathbb{L}}
\newcommand{\lab}{\mathpzc{l}}

% semantics
\newcommand{\sem}[1]{\llbracket{#1}\rrbracket}
\newcommand{\semi}[1]{\sem{#1}_\inst}
\newcommand{\seme}[1]{\sem{#1}_\expr}
\newcommand{\semr}[1]{\sem{#1}_\refer}
\newcommand{\asem}[1]{\abs{\sem{#1}}}
\newcommand{\asemi}[1]{\asem{#1}_\inst}
\newcommand{\aseme}[1]{\asem{#1}_\expr}
\newcommand{\asemr}[1]{\asem{#1}_\refer}

% table
\newcommand{\mr}[2]{\multirow{#1}{*}{#2}}
\newcommand{\sr}[1]{#1}
\newcommand{\myrowc}[9]{
\mr{#1} {\stextsf{#2}}&
\mr{1}  {\stextsf{#6}}&
\mr{#1} {\inred{#3}}&
\mr{1}  {\inred{#7}}&
\mr{#1} {\inred{#4}}&
\mr{1}  {\inred{#8}}&
\mr{#1} {\inred{#5}}&
\mr{1}  {\inred{#9}}\\
}
\newcommand{\myrowh}[4]{
\cline{2-2}\cline{4-4}\cline{6-6}\cline{8-8}
&\mr{1}{\stextsf{#1}}&
&\mr{1}{\inred{#2}}&
&\mr{1}{\inred{#3}}&
&\mr{1}{\inred{#4}}\\
}
\newcommand{\mysrowh}[4]{
\multicolumn{2}{c?}{#1}&
\multicolumn{2}{c?}{\inred{#2}}&
\multicolumn{2}{c?}{\inred{#3}}&
\multicolumn{2}{c}{\inred{#4}}\\
}
\newcommand{\md}[3]{+#1 / -#2 (+#3\%)}

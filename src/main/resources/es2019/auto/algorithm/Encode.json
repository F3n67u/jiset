{"kind":"RuntimeSemantics","lang":false,"params":["string","unescapedSet"],"steps":[{"tokens":["Let",{"id":"strLen"},"be","the","number","of","code","units","in",{"id":"string"},"."]},{"tokens":["Let",{"id":"R"},"be","the","empty","String","."]},{"tokens":["Let",{"id":"k"},"be","0","."]},{"tokens":["Repeat",",",{"steps":[{"tokens":["If",{"id":"k"},"equals",{"id":"strLen"},",","return",{"id":"R"},"."]},{"tokens":["Let",{"id":"C"},"be","the","code","unit","at","index",{"id":"k"},"within",{"id":"string"},"."]},{"tokens":["If",{"id":"C"},"is","in",{"id":"unescapedSet"},",","then",{"steps":[{"tokens":["Let",{"id":"S"},"be","the","String","value","containing","only","the","code","unit",{"id":"C"},"."]},{"tokens":["Set",{"id":"R"},"to","the","string","-","concatenation","of","the","previous","value","of",{"id":"R"},"and",{"id":"S"},"."]}]}]},{"tokens":["Else",{"id":"C"},"is","not","in",{"id":"unescapedSet"},",",{"steps":[{"tokens":["If",{"id":"C"},"is","a","trailing","surrogate",",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["If",{"id":"C"},"is","not","a","leading","surrogate",",","then",{"steps":[{"tokens":["Let",{"id":"V"},"be","the","code","point","with","the","same","numeric","value","as","code","unit",{"id":"C"},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Increase",{"id":"k"},"by","1","."]},{"tokens":["If",{"id":"k"},"equals",{"id":"strLen"},",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["Let",{"id":"kChar"},"be","the","code","unit","at","index",{"id":"k"},"within",{"id":"string"},"."]},{"tokens":["If",{"id":"kChar"},"is","not","a","trailing","surrogate",",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["Let",{"id":"V"},"be","UTF16Decode","(",{"id":"C"},",",{"id":"kChar"},")","."]}]}]},{"tokens":["Let",{"id":"Octets"},"be","the","List","of","octets","resulting","by","applying","the","UTF","-","8","transformation","to",{"id":"V"},"."]},{"tokens":["For","each","element",{"id":"octet"},"of",{"id":"Octets"},"in","List","order",",","do",{"steps":[{"tokens":["Let",{"id":"S"},"be","the","string","-","concatenation","of",":",{"steps":[{"tokens":[{"code":"\"%\""}]},{"tokens":["the","String","representation","of",{"id":"octet"},",","formatted","as","a","two","-","digit","uppercase","hexadecimal","number",",","padded","to","the","left","with","a","zero","if","necessary"]}]}]},{"tokens":["Set",{"id":"R"},"to","the","string","-","concatenation","of","the","previous","value","of",{"id":"R"},"and",{"id":"S"},"."]}]}]}]}]},{"tokens":["Increase",{"id":"k"},"by","1","."]}]}]}],"length":2,"filename":"es2019/algorithm/Encode.json"}
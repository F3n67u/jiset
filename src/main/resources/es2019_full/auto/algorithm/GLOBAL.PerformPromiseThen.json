{"kind":"Method","params":["this","argumentsList","NewTarget"],"steps":[{"tokens":["Let",{"id":"promise"},"be","GetArgument","(",{"id":"argumentsList"},",","0",")","."]},{"tokens":["Let",{"id":"onFulfilled"},"be","GetArgument","(",{"id":"argumentsList"},",","1",")","."]},{"tokens":["Let",{"id":"onRejected"},"be","GetArgument","(",{"id":"argumentsList"},",","2",")","."]},{"tokens":["Let",{"id":"resultCapability"},"be","GetArgument","(",{"id":"argumentsList"},",","3",")","."]},{"tokens":["Assert",":","IsPromise","(",{"id":"promise"},")","is",{"value":"true"},"."]},{"tokens":["If",{"id":"argumentsList"},"[","3","]","is","present",",","then",{"steps":[{"tokens":["Assert",":",{"id":"resultCapability"},"is","a","PromiseCapability","Record","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Set",{"id":"resultCapability"},"to",{"value":"undefined"},"."]}]}]},{"tokens":["If","IsCallable","(",{"id":"onFulfilled"},")","is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"onFulfilled"},"to",{"value":"undefined"},"."]}]}]},{"tokens":["If","IsCallable","(",{"id":"onRejected"},")","is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"onRejected"},"to",{"value":"undefined"},"."]}]}]},{"tokens":["Let",{"id":"fulfillReaction"},"be","the","PromiseReaction","{","[","[","Capability","]","]",":",{"id":"resultCapability"},",","[","[","Type","]","]",":",{"code":"\"Fulfill\""},",","[","[","Handler","]","]",":",{"id":"onFulfilled"},"}","."]},{"tokens":["Let",{"id":"rejectReaction"},"be","the","PromiseReaction","{","[","[","Capability","]","]",":",{"id":"resultCapability"},",","[","[","Type","]","]",":",{"code":"\"Reject\""},",","[","[","Handler","]","]",":",{"id":"onRejected"},"}","."]},{"tokens":["If",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"code":"\"pending\""},",","then",{"steps":[{"tokens":["Append",{"id":"fulfillReaction"},"as","the","last","element","of","the","List","that","is",{"id":"promise"},".","[","[","PromiseFulfillReactions","]","]","."]},{"tokens":["Append",{"id":"rejectReaction"},"as","the","last","element","of","the","List","that","is",{"id":"promise"},".","[","[","PromiseRejectReactions","]","]","."]}]}]},{"tokens":["Else","if",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"code":"\"fulfilled\""},",","then",{"steps":[{"tokens":["Let",{"id":"value"},"be",{"id":"promise"},".","[","[","PromiseResult","]","]","."]},{"tokens":["Perform","EnqueueJob","(",{"code":"\"PromiseJobs\""},",","PromiseReactionJob",",","«",{"id":"fulfillReaction"},",",{"id":"value"},"»",")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Assert",":","The","value","of",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"code":"\"rejected\""},"."]},{"tokens":["Let",{"id":"reason"},"be",{"id":"promise"},".","[","[","PromiseResult","]","]","."]},{"tokens":["If",{"id":"promise"},".","[","[","PromiseIsHandled","]","]","is",{"value":"false"},",","perform","HostPromiseRejectionTracker","(",{"id":"promise"},",",{"code":"\"handle\""},")","."]},{"tokens":["Perform","EnqueueJob","(",{"code":"\"PromiseJobs\""},",","PromiseReactionJob",",","«",{"id":"rejectReaction"},",",{"id":"reason"},"»",")","."]}]}]},{"tokens":["Set",{"id":"promise"},".","[","[","PromiseIsHandled","]","]","to",{"value":"true"},"."]},{"tokens":["If",{"id":"resultCapability"},"is",{"value":"undefined"},",","then",{"steps":[{"tokens":["Return",{"value":"undefined"},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Return",{"id":"resultCapability"},".","[","[","Promise","]","]","."]}]}]}],"length":3,"filename":"es2019/algorithm/GLOBAL.PerformPromiseThen.json"}
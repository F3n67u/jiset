{"kind":"Method","params":["promise","onFulfilled","onRejected","resultCapability"],"steps":[{"tokens":["Assert",":","IsPromise","(",{"id":"promise"},")","is",{"value":"true"},"."]},{"tokens":["Assert",":",{"id":"resultCapability"},"is","a","PromiseCapability","Record","."]},{"tokens":["If","IsCallable","(",{"id":"onFulfilled"},")","is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"onFulfilled"},"to",{"value":"undefined"},"."]}]}]},{"tokens":["If","IsCallable","(",{"id":"onRejected"},")","is",{"value":"false"},",","then",{"steps":[{"tokens":["Set",{"id":"onRejected"},"to",{"value":"undefined"},"."]}]}]},{"tokens":["Let",{"id":"fulfillReaction"},"be","the","PromiseReaction","{","[","[","Capability","]","]",":",{"id":"resultCapability"},",","[","[","Type","]","]",":",{"value":"\"Fulfill\""},",","[","[","Handler","]","]",":",{"id":"onFulfilled"},"}","."]},{"tokens":["Let",{"id":"rejectReaction"},"be","the","PromiseReaction","{","[","[","Capability","]","]",":",{"id":"resultCapability"},",","[","[","Type","]","]",":",{"value":"\"Reject\""},",","[","[","Handler","]","]",":",{"id":"onRejected"},"}","."]},{"tokens":["If",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"value":"\"pending\""},",","then",{"steps":[{"tokens":["Append",{"id":"fulfillReaction"},"as","the","last","element","of","the","List","that","is",{"id":"promise"},".","[","[","PromiseFulfillReactions","]","]","."]},{"tokens":["Append",{"id":"rejectReaction"},"as","the","last","element","of","the","List","that","is",{"id":"promise"},".","[","[","PromiseRejectReactions","]","]","."]}]}]},{"tokens":["Else","if",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"value":"\"fulfilled\""},",","then",{"steps":[{"tokens":["Let",{"id":"value"},"be",{"id":"promise"},".","[","[","PromiseResult","]","]","."]},{"tokens":["Perform","EnqueueJob","(",{"value":"\"PromiseJobs\""},",","PromiseReactionJob",",","«",{"id":"fulfillReaction"},",",{"id":"value"},"»",")","."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Assert",":","The","value","of",{"id":"promise"},".","[","[","PromiseState","]","]","is",{"value":"\"rejected\""},"."]},{"tokens":["Let",{"id":"reason"},"be",{"id":"promise"},".","[","[","PromiseResult","]","]","."]},{"tokens":["If",{"id":"promise"},".","[","[","PromiseIsHandled","]","]","is",{"value":"false"},",","perform","HostPromiseRejectionTracker","(",{"id":"promise"},",",{"value":"\"handle\""},")","."]},{"tokens":["Perform","EnqueueJob","(",{"value":"\"PromiseJobs\""},",","PromiseReactionJob",",","«",{"id":"rejectReaction"},",",{"id":"reason"},"»",")","."]}]}]},{"tokens":["Set",{"id":"promise"},".","[","[","PromiseIsHandled","]","]","to",{"value":"true"},"."]},{"tokens":["Return",{"id":"resultCapability"},".","[","[","Promise","]","]","."]}],"filename":"es2018/algorithm/GlobalDOTPerformPromiseThen.json"}
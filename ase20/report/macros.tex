% IRES
\newcommand{\ires}{\text{IR}_\text{ES}}

% colors
\newcommand{\inred}[1]{{\color{red}{#1}}}

% finite map
\newcommand{\finmap}{\xrightarrow{\texttt{fin}}}

% codes
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\C}[1]{\texttt{#1}}

% Values
\newcommand{\valset}{\mathbb{V}}
\newcommand{\val}{v}
\newcommand{\pvalset}{\valset_\code{p}}
\newcommand{\pval}{v^\code{p}}
\newcommand{\doubleset}{\valset_\code{double}}
\newcommand{\double}{d}
\newcommand{\intset}{\valset_\code{int}}
\newcommand{\intvalue}{n}
\newcommand{\strset}{\valset_\code{str}}
\newcommand{\str}{s}
\newcommand{\boolset}{\valset_\code{bool}}
\newcommand{\bool}{b}
\newcommand{\refvalset}{\valset_r}
\newcommand{\refval}{v^r}

% Syntax
\newcommand{\idset}{\mathbb{X}}
\newcommand{\id}{x}
\newcommand{\refset}{R}
\newcommand{\refer}{r}
\newcommand{\prset}{P}
\newcommand{\pr}{p}
\newcommand{\instset}{I}
\newcommand{\inst}{i}
\newcommand{\insts}{\overline{i}}
\newcommand{\exprset}{E}
\newcommand{\expr}{e}
\newcommand{\uop}{\odot}
\newcommand{\bop}{\oplus}
\newcommand{\cop}{\triangleright}

% States
\newcommand{\stset}{\mathbb{S}}
\newcommand{\st}{\sigma}
\newcommand{\ctxtset}{\mathbb{C}}
\newcommand{\ctxtstack}{\overline{c}}
\newcommand{\ctxt}{c}
\newcommand{\envset}{\mathbb{E}}
\newcommand{\env}{\rho}
\newcommand{\heapset}{\mathbb{H}}
\newcommand{\heap}{h}
\newcommand{\addrset}{\mathbb{A}}
\newcommand{\addr}{a}
\newcommand{\objset}{\mathbb{O}}
\newcommand{\obj}{o}

% AST
\makeatletter
\newcommand\RSloop{\@ifnextchar\bgroup\RSloopa\RSloopb}
\makeatother
\newcommand\RSloopa[1]{\bgroup\RSloop#1\relax\egroup\RSloop}
\newcommand\RSloopb[1]%
  {\ifx\relax#1%
   \else
     \ifcsname RS:#1\endcsname
       \csname RS:#1\endcsname
     \else
       \GenericError{(RS)}{RS Error: operator #1 undefined}{}{}%
     \fi
   \expandafter\RSloop
   \fi
  }
\newcommand\X{0}
\newcommand\RS[1]%
  {\begin{tikzpicture}
     [every node/.style=
       {circle,draw,fill,minimum size=1.5pt,inner sep=0pt,outer sep=0pt},
      line cap=round
     ]
   \coordinate(\X) at (0,0);
   \RSloop{#1}\relax
   \end{tikzpicture}
  }
\newcommand\RSdef[1]{\expandafter\def\csname RS:#1\endcsname}
\newlength\RSu
\RSu=1ex
\RSdef{l}{\draw (\X) -- +(225:\RSu) node{};}
\RSdef{r}{\draw (\X) -- +(315:\RSu) node{};}
\RSdef{L}{\draw (\X) -- +(225:\RSu) coordinate(\X L);\edef\X{\X L}}
\RSdef{R}{\draw (\X) -- +(315:\RSu) coordinate(\X R);\edef\X{\X R}}
\newcommand{\AST}{\RS{lRlr}}

% Semantics
\newcommand{\trans}{\leadsto}
\newcommand{\transrep}{\trans^*}
\newcommand{\stinit}{\st_\iota}
\newcommand{\ctxtinit}{\ctxt_\iota}
\newcommand{\envinit}{\env_\iota}
\newcommand{\heapinit}{\heap_\iota}
\newcommand{\idret}{\code{RET}}
\newcommand{\sem}[1]{[\![ #1 ]\!]}

% JISET
\newcommand{\tool}{\text{\sf JISET}}

% evaluation
\newcommand{\evalinst}[3]{#1 \vdash #2 \Rightarrow #3}
\newcommand{\evalexpr}[4]{#1 \vdash #2 \Rightarrow #3,\ #4}
\newcommand{\evalref}[4]{#1 \vdash #2 \Rightarrow #3,\ #4}
\newcommand{\evalrefv}[4]{#1 \vdash #2 \Rightarrow #3,\ #4}

% helper function names
\newcommand{\cescape}{\code{Escape}}
\newcommand{\cdefine}{\code{Define}}
\newcommand{\cupdated}{\code{Updated}}
\newcommand{\cdeleted}{\code{Deleted}}
\newcommand{\cappend}{\code{Append}}
\newcommand{\cprepend}{\code{Prepend}}
\newcommand{\creturn}{\code{Return}}
\newcommand{\cprint}{\code{Print}}
\newcommand{\cgetaddrfield}{\code{GetAddrField}}
\newcommand{\cgetstrfield}{\code{GetStringField}}
\newcommand{\cgetastfield}{\code{GetASTField}}
\newcommand{\callocmap}{\code{AllocMap}}
\newcommand{\calloclist}{\code{AllocList}}
\newcommand{\callocsym}{\code{AllocSymbol}}
\newcommand{\cpop}{\code{Pop}}
\newcommand{\cgettype}{\code{GetType}}
\newcommand{\ciscompletion}{\code{IsCompletion}}
\newcommand{\cisinstanceof}{\code{IsInstanceOf}}
\newcommand{\cgetelems}{\code{GetElems}}
\newcommand{\cgetsyntax}{\code{GetSyntax}}
\newcommand{\cparse}{\code{Parse}}
\newcommand{\cconvert}{\code{Convert}}
\newcommand{\ccontains}{\code{Contains}}
\newcommand{\ckeys}{\code{Keys}}
\newcommand{\clookup}{\code{Lookup}}
\newcommand{\ccharat}{\code{CharAt}}
\newcommand{\ctoint}{\code{ToInt}}
\newcommand{\cget}{\code{Get}}
\newcommand{\cset}{\code{Set}}

% helper function
\newcommand{\hescape}[3]{#3 = \cescape(#1, #2)}
\newcommand{\hdefine}[4]{#4 = \cdefine(#1, #2, #3)}
\newcommand{\hupdated}[4]{#4 = \cupdated(#1, #2, #3)}
\newcommand{\hdeleted}[3]{#3 = \cdeleted(#1, #2)}
\newcommand{\happend}[4]{#4 = \cappend(#1, #2, #3)}
\newcommand{\hprepend}[4]{#4 = \cprepend(#1, #2, #3)}
\newcommand{\hreturn}[3]{#3 = \creturn(#1, #2)}
\newcommand{\hprint}[1]{\cprint(#1)}
\newcommand{\hgetaddrfield}[4]{#4 = \cgetaddrfield(#1, #2, #3)}
\newcommand{\hgetstrfield}[3]{#3 = \cgetstrfield(#1, #2)}
\newcommand{\hgetastfield}[3]{#3 = \cgetastfield(#1, #2)}
\newcommand{\hallocmap}[4]{(#3, #4) = \callocmap(#1, #2)}
\newcommand{\halloclist}[4]{(#3, #4) = \calloclist(#1, #2)}
\newcommand{\hallocsym}[4]{(#3, #4) = \callocsym(#1, #2)}
\newcommand{\hpop}[5]{(#4, #5) = \cpop(#1, #2, #3)}
\newcommand{\hgettype}[3]{#3 = \cgettype(#1, #2)}
\newcommand{\hiscompletion}[3]{#3 = \ciscompletion(#1, #2)}
\newcommand{\hisinstanceof}[3]{#3 = \cisinstanceof(#1, #2)}
\newcommand{\hgetelems}[5]{(#4, #5) = \cgetelems(#1, #2, #3)}
\newcommand{\hgetsyntax}[2]{#2 = \cgetsyntax(#1)}
\newcommand{\hparse}[4]{#4 = \cparse(#1, #2, #3)}
\newcommand{\hconvert}[4]{#4 = \cconvert(#1, #2, #3)}
\newcommand{\hcontains}[4]{#4 = \ccontains(#1, #2, #3)}
\newcommand{\hkeys}[4]{(#3, #4) = \ckeys(#1, #2)}
\newcommand{\hlookup}[3]{#3 = \clookup(#1, #2)}

\newcommand{\hcharat}[3]{#3 = \ccharat(#1, #2)}
\newcommand{\htoint}[2]{#2 = \ctoint(#1)}

% Domain
\newcommand{\dom}[1]{\C{Domain}(#1)}







\newcommand{\evalescexpr}[4]{#1 \vdash_{escape} #2 \Rightarrow #3,\ #4}
\newcommand{\evaluop}[2]{\symuop #1 \Rightarrow #2}
\newcommand{\evalbop}[3]{#1 \symbop #2 \Rightarrow #3}

% style
\newcommand{\Acd}[1]{\mathsf{#1}}
\newcommand{\cs}[0]{\quad}

% symbols
\newcommand{\symstate}[0]{\sigma}
\newcommand{\symctx}[0]{C}
\newcommand{\symctxstack}[0]{C^*}
\newcommand{\symglb}[0]{\mathbb{G}}
\newcommand{\symenv}[0]{E}
\newcommand{\symheap}[0]{H}
\newcommand{\symuop}[0]{\odot}
\newcommand{\symbop}[0]{\oplus}
\newcommand{\symast}[0]{ASTVal}
\newcommand{\symastm}[0]{ASTMethod}
\newcommand{\symrefv}[0]{rv}
\newcommand{\symstatetuple}[4]{(#1,\ #2,\ #3,\ #4)}
\newcommand{\symstdef}[0]
{\symstatetuple{\symctx}{\symctxstack}{\symenv}{\symheap}}
\newcommand{\symctxtuple}[4]{(#1,\ #2,\ #3,\ #4)}
\newcommand{\symctxdef}[0]{\symctxtuple{x}{s}{i^*}{E}}
\newcommand{\symlist}[1]{\code{<} #1 \code{>}}
\newcommand{\symmap}[3]{#1\ \code{\{} [#2 \mapsto #3]^* \code{\}}}

% value
\newcommand{\valfunc}[4]{\lambda \code{(} #1,\ #2,\ #3,\ #4 \code{)}}
\newcommand{\valcont}[4]{\kappa \code{(} #1,\ #2,\ #3,\ #4 \code{)}}
\newcommand{\valast}[4]{\symast \code{(} \code{)}}

%etc
\newcommand{\mathlen}[1]{|#1|}

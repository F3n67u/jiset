{"kind":"RuntimeSemantics","params":["string","unescapedSet"],"steps":[{"tokens":["Let",{"id":"strLen"},"be","the","number","of","code","units","in",{"id":"string"},"."]},{"tokens":["Let",{"id":"R"},"be","the","empty","String","."]},{"tokens":["Let",{"id":"k"},"be","0","."]},{"tokens":["Repeat",{"steps":[{"tokens":["If",{"id":"k"},"equals",{"id":"strLen"},",","return",{"id":"R"},"."]},{"tokens":["Let",{"id":"C"},"be","the","code","unit","at","index",{"id":"k"},"within",{"id":"string"},"."]},{"tokens":["If",{"id":"C"},"is","in",{"id":"unescapedSet"},",","then",{"steps":[{"tokens":["Let",{"id":"S"},"be","a","String","containing","only","the","code","unit",{"id":"C"},"."]},{"tokens":["Let",{"id":"R"},"be","a","new","String","value","computed","by","concatenating","the","previous","value","of",{"id":"R"},"and",{"id":"S"},"."]}]}]},{"tokens":["Else",{"id":"C"},"is","not","in",{"id":"unescapedSet"},",",{"steps":[{"tokens":["If","the","code","unit","value","of",{"id":"C"},"is","not","less","than","0xDC00","and","not","greater","than","0xDFFF",",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["If","the","code","unit","value","of",{"id":"C"},"is","less","than","0xD800","or","greater","than","0xDBFF",",","then",{"steps":[{"tokens":["Let",{"id":"V"},"be","the","code","unit","value","of",{"id":"C"},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Increase",{"id":"k"},"by","1","."]},{"tokens":["If",{"id":"k"},"equals",{"id":"strLen"},",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["Let",{"id":"kChar"},"be","the","code","unit","value","of","the","code","unit","at","index",{"id":"k"},"within",{"id":"string"},"."]},{"tokens":["If",{"id":"kChar"},"is","less","than","0xDC00","or","greater","than","0xDFFF",",","throw","a",{"value":"URIError"},"exception","."]},{"tokens":["Let",{"id":"V"},"be","UTF16Decode","(",{"id":"C"},",",{"id":"kChar"},")","."]}]}]},{"tokens":["Let",{"id":"Octets"},"be","the","array","of","octets","resulting","by","applying","the","UTF","-","8","transformation","to",{"id":"V"},",","and","let",{"id":"L"},"be","the","array","size","."]},{"tokens":["Let",{"id":"j"},"be","0","."]},{"tokens":["Repeat",",","while",{"id":"j"},"<",{"id":"L"},{"steps":[{"tokens":["Let",{"id":"jOctet"},"be","the","value","at","index",{"id":"j"},"within",{"id":"Octets"},"."]},{"tokens":["Let",{"id":"S"},"be","a","String","containing","three","code","units",{"code":"\"%XY\""},"where",{"id":"XY"},"are","two","uppercase","hexadecimal","digits","encoding","the","value","of",{"id":"jOctet"},"."]},{"tokens":["Let",{"id":"R"},"be","a","new","String","value","computed","by","concatenating","the","previous","value","of",{"id":"R"},"and",{"id":"S"},"."]},{"tokens":["Increase",{"id":"j"},"by","1","."]}]}]}]}]},{"tokens":["Increase",{"id":"k"},"by","1","."]}]}]}],"length":2,"filename":"es2000/algorithm/Encode.json"}
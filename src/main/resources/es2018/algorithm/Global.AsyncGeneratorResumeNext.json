{"kind":"Method","params":["generator"],"steps":[{"tokens":["Assert",":",{"id":"generator"},"is","an","AsyncGenerator","instance","."]},{"tokens":["Let",{"id":"state"},"be",{"id":"generator"},".","[","[","AsyncGeneratorState","]","]","."]},{"tokens":["Assert",":",{"id":"state"},"is","not",{"value":"\"executing\""},"."]},{"tokens":["If",{"id":"state"},"is",{"value":"\"awaiting-return\""},",","return",{"value":"undefined"},"."]},{"tokens":["Let",{"id":"queue"},"be",{"id":"generator"},".","[","[","AsyncGeneratorQueue","]","]","."]},{"tokens":["If",{"id":"queue"},"is","an","empty","List",",","return",{"value":"undefined"},"."]},{"tokens":["Let",{"id":"next"},"be","the","value","of","the","first","element","of",{"id":"queue"},"."]},{"tokens":["Assert",":",{"id":"next"},"is","an","AsyncGeneratorRequest","record","."]},{"tokens":["Let",{"id":"completion"},"be",{"id":"next"},".","[","[","Completion","]","]","."]},{"tokens":["If",{"id":"completion"},"is","an","abrupt","completion",",","then",{"steps":[{"tokens":["If",{"id":"state"},"is",{"value":"\"suspendedStart\""},",","then",{"steps":[{"tokens":["Set",{"id":"generator"},".","[","[","AsyncGeneratorState","]","]","to",{"value":"\"completed\""},"."]},{"tokens":["Set",{"id":"state"},"to",{"value":"\"completed\""},"."]}]}]},{"tokens":["If",{"id":"state"},"is",{"value":"\"completed\""},",","then",{"steps":[{"tokens":["If",{"id":"completion"},".","[","[","Type","]","]","is",{"value":"return"},",","then",{"steps":[{"tokens":["Set",{"id":"generator"},".","[","[","AsyncGeneratorState","]","]","to",{"value":"\"awaiting-return\""},"."]},{"tokens":["Let",{"id":"promiseCapability"},"be","!","NewPromiseCapability","(","%","Promise","%",")","."]},{"tokens":["Perform","!","Call","(",{"id":"promiseCapability"},".","[","[","Resolve","]","]",",",{"value":"undefined"},",","«",{"id":"completion"},".","[","[","Value","]","]","»",")","."]},{"tokens":["Let",{"id":"stepsFulfilled"},"be","the","algorithm","steps","defined","in","AsyncGeneratorResumeNext","Return","Processor","Fulfilled","Functions","."]},{"tokens":["Let",{"id":"onFulfilled"},"be","CreateBuiltinFunction","(",{"id":"stepsFulfilled"},",","«","[","[","Generator","]","]","»",")","."]},{"tokens":["Set",{"id":"onFulfilled"},".","[","[","Generator","]","]","to",{"id":"generator"},"."]},{"tokens":["Let",{"id":"stepsRejected"},"be","the","algorithm","steps","defined","in","AsyncGeneratorResumeNext","Return","Processor","Rejected","Functions","."]},{"tokens":["Let",{"id":"onRejected"},"be","CreateBuiltinFunction","(",{"id":"stepsRejected"},",","«","[","[","Generator","]","]","»",")","."]},{"tokens":["Set",{"id":"onRejected"},".","[","[","Generator","]","]","to",{"id":"generator"},"."]},{"tokens":["Let",{"id":"throwawayCapability"},"be","!","NewPromiseCapability","(","%","Promise","%",")","."]},{"tokens":["Set",{"id":"throwawayCapability"},".","[","[","Promise","]","]",".","[","[","PromiseIsHandled","]","]","to",{"value":"true"},"."]},{"tokens":["Perform","!","PerformPromiseThen","(",{"id":"promiseCapability"},".","[","[","Promise","]","]",",",{"id":"onFulfilled"},",",{"id":"onRejected"},",",{"id":"throwawayCapability"},")","."]},{"tokens":["Return",{"value":"undefined"},"."]}]}]},{"tokens":["Else",",",{"steps":[{"tokens":["Assert",":",{"id":"completion"},".","[","[","Type","]","]","is",{"value":"throw"},"."]},{"tokens":["Perform","!","AsyncGeneratorReject","(",{"id":"generator"},",",{"id":"completion"},".","[","[","Value","]","]",")","."]},{"tokens":["Return",{"value":"undefined"},"."]}]}]}]}]}]}]},{"tokens":["Else","if",{"id":"state"},"is",{"value":"\"completed\""},",","return","!","AsyncGeneratorResolve","(",{"id":"generator"},",",{"value":"undefined"},",",{"value":"true"},")","."]},{"tokens":["Assert",":",{"id":"state"},"is","either",{"value":"\"suspendedStart\""},"or",{"value":"\"suspendedYield\""},"."]},{"tokens":["Let",{"id":"genContext"},"be",{"id":"generator"},".","[","[","AsyncGeneratorContext","]","]","."]},{"tokens":["Let",{"id":"callerContext"},"be","the","running","execution","context","."]},{"tokens":["Suspend",{"id":"callerContext"},"."]},{"tokens":["Set",{"id":"generator"},".","[","[","AsyncGeneratorState","]","]","to",{"value":"\"executing\""},"."]},{"tokens":["Push",{"id":"genContext"},"onto","the","execution","context","stack",";",{"id":"genContext"},"is","now","the","running","execution","context","."]},{"tokens":["Resume","the","suspended","evaluation","of",{"id":"genContext"},"using",{"id":"completion"},"as","the","result","of","the","operation","that","suspended","it",".","Let",{"id":"result"},"be","the","completion","record","returned","by","the","resumed","computation","."]},{"tokens":["Assert",":",{"id":"result"},"is","never","an","abrupt","completion","."]},{"tokens":["Assert",":","When","we","return","here",",",{"id":"genContext"},"has","already","been","removed","from","the","execution","context","stack","and",{"id":"callerContext"},"is","the","currently","running","execution","context","."]},{"tokens":["Return",{"value":"undefined"},"."]}],"filename":"es2018/algorithm/Global.AsyncGeneratorResumeNext.json"}